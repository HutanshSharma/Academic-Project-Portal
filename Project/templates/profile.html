{% extends "layout.html" %}
{% block content %}
    <main class="container dashboard">
    <div class="profile-header">
      <img class="rounded-circle account-img" src="{{img_src}}">
      <div class="details">
        <h2>{{current_user.username}}</h2>
        <p>{{current_user.email}}</p>
        <p>{{current_user.role.capitalize()}}</p>
        <a class="button" href="{{url_for('update_profile')}}">Edit Profile</a>
      </div>
    </div>

    <div class="proj-grid">
      <div class="proj-card">
        <div class="proj-content">
          <h4>Active Projects</h4>
          <span class="proj-number">{{current_user.total_projects}}</span>
        </div>
        <p>Currently accepting applications</p>
      </div>
      
      <div class="proj-card">
        <div class="proj-content">
          <h4>Submissions</h4>
          <span class="proj-number">{{current_user.total_projects_submitted}}</span>
        </div>
        <p>Pending review</p>
      </div>
      
      <div class="proj-card">
        <div class="proj-content">
          <h4>Submissions Evaluated</h4>
          <span class="proj-number">{{current_user.total_projects_evaluated}}</span>
        </div>
        <p>Remarks Given</p>
      </div>
    </div>

    <div class="projects-table-container">
      <div class="table-header">
        <h2>Research Projects</h2>
        <a class="button button-diff" href="{{url_for('add_project')}}">Add Project</a>
      </div>

      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>Project's Title</th>
              <th>Upload Date</th>
              <th>Applications</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
              {% for i in projects %}
              <tr>
                <td>{{i.title}}</td>
                <td>{{i.created_at.strftime("%Y-%m-%d")}}</td>
                <td>{{i.user_count}}</td>
                <td><a class="btn btn-danger" href="#">Delete</a></td>
              </tr>
              {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </main>
{% endblock content %}
